<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Entity-Component Relationship Diagram</title>
<style>
  body {
    font-family: sans-serif;
    background: #f9f9f9;
    margin: 0;
    padding: 0;
  }
  svg {
    width: 100%;
    height: 100vh;
    background: #fff;
    border: 1px solid #ccc;
  }
  .entity {
    stroke: #333;
    stroke-width: 2;
    fill: #e0f7fa;
    rx: 10;
    ry: 10;
  }
  .component-slot {
    stroke: #666;
    stroke-width: 1.5;
    fill: #fff;
    rx: 5;
    ry: 5;
  }
  .label {
    font-size: 12px;
    text-anchor: middle;
    dominant-baseline: middle;
    pointer-events: none;
  }
  .arrow {
    stroke-width: 1.5;
    fill: none;
  }
</style>
</head>
<body>
<svg id="diagram"></svg>
<script type="module">
import { buildRawEntities, generateDiagramData, drawEcsDiagram } from './ecsDiagram.js';

// Provide only a list of entity types
const entityTypes = [
  'Space',
  'Category',
  'Channel',
  'Thread',
  'Message',
  'Message',
  'Message',
  'Image',
];

// Build raw ECS entities with unique IDs and inferred components
const rawEntities = buildRawEntities(entityTypes);

// Generate diagram data dynamically
const diagramData = generateDiagramData(rawEntities);

// Draw the diagram
drawEcsDiagram('#diagram', diagramData);
</script>
</body>
</html>